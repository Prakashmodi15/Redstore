<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Account - RedStore</title>

<link rel="stylesheet" href="CSS/style.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>

<!-- ================= NAVBAR ================= -->
<div class="container">
  <div class="navbar">
    <div class="logo">
      <a href="index.html"><img src="images/logo.png" width="125px"></a>
    </div>
    <nav>
      <ul id="MenuItems">
        <li><a href="index.html">Home</a></li>
        <li><a href="Products.html">Products</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
         <li><a href="account.html">Account</a></li>
      </ul>
    </nav>
    <img src="images/cart.png" width="30">
    <img src="images/menu.png" class="menu-icon" onclick="menutoggle()">
  </div>
</div>

<!-- ================= ACCOUNT ================= -->
<div class="account-page">
<div class="container">
<div class="row">

<div class="col-2">
  <img src="images/image1.png" width="100%">
</div>

<div class="col-2">
<div class="form-container">

<div class="form-btn">
  <span onclick="login()">Login</span>
  <span onclick="register()">Register</span>
  <hr id="Indicator">
</div>

<!-- LOGIN -->
<form id="LoginForm">
  <input type="email" id="loginEmail" placeholder="Email" required>
  <input type="password" id="loginPassword" placeholder="Password" required>
  <button type="submit" class="btn">Login</button>
</form>

<!-- REGISTER -->
<form id="RegForm">
  <input type="text" id="regName" placeholder="Full Name">
  <input type="email" id="regEmail" placeholder="Email" required>
  <input type="password" id="regPassword" placeholder="Password" required>
  <button type="submit" class="btn">Register</button>
</form>

</div>
</div>

</div>
</div>
</div>

<!-- ================= FOOTER ================= -->
<div class="footer">
<div class="container">
<hr>
<p class="copyright">
Copyright 2025 - Made with ‚ù§Ô∏è by Prakash Modi
</p>
</div>
</div>

<!-- ================= MENU ================= -->
<script>
var MenuItems=document.getElementById("MenuItems");
MenuItems.style.maxHeight="0px";
function menutoggle(){
  MenuItems.style.maxHeight =
  MenuItems.style.maxHeight=="0px"?"200px":"0px";
}
</script>

<!-- ================= FORM TOGGLE ================= -->
<script>
var LoginForm=document.getElementById("LoginForm");
var RegForm=document.getElementById("RegForm");
var Indicator=document.getElementById("Indicator");

function register(){
  RegForm.style.transform="translateX(0px)";
  LoginForm.style.transform="translateX(0px)";
  Indicator.style.transform="translateX(100px)";
}

function login(){
  RegForm.style.transform="translateX(300px)";
  LoginForm.style.transform="translateX(300px)";
  Indicator.style.transform="translateX(0px)";
}
</script>

<!-- ================= FIREBASE AUTH ================= -->
<script type="module">
import { initializeApp } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";

import {
 getAuth,
 createUserWithEmailAndPassword,
 signInWithEmailAndPassword
} from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

import {
 getFirestore,
 doc,
 setDoc
} from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig={
 apiKey:"AIzaSyBe6T75YFS3MACQ1Drmrrj6xeRlMIwT7s4",
 authDomain:"myshop-1dbc9.firebaseapp.com",
 projectId:"myshop-1dbc9",
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);

/* REGISTER */
RegForm.addEventListener("submit",async e=>{
 e.preventDefault();

 try{
  const cred = await createUserWithEmailAndPassword(
    auth,
    regEmail.value,
    regPassword.value
  );

  // üî• USER PROFILE CREATE (ONE TIME)
  await setDoc(doc(db,"users",cred.user.uid),{
    name: regName.value,
    email: regEmail.value,
    createdAt: new Date()
  });

  alert("Registration Successful ‚úÖ");
  location.href="customer-profile.html";

 }catch(err){
  alert(err.message);
 }
});

/* LOGIN */
LoginForm.addEventListener("submit",e=>{
 e.preventDefault();

 signInWithEmailAndPassword(
  auth,
  loginEmail.value,
  loginPassword.value
 )
 .then(()=>{
  alert("Login Successful ‚úÖ");
  location.href="customer-profile.html";
 })
 .catch(err=>alert(err.message));
});
</script>
</body>
</html>
